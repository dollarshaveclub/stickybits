/**
  stickybits - Stickybits is a lightweight alternative to `position: sticky` polyfills
  @version v3.3.0
  @link https://github.com/dollarshaveclub/stickybits#readme
  @author Jeff Wainwright <yowainwright@gmail.com> (https://jeffry.in)
  @license MIT
**/
!function(t,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):t.stickybits=s()}(this,function(){"use strict";function t(t,s,e){var i=t.className.split(" ");e&&-1===i.indexOf(e)&&i.push(e);var n=i.indexOf(s);-1!==n&&i.splice(n,1),t.className=i.join(" ")}function s(t,s){var e=void 0!==s?s:{};this.version="3.3.0",this.userAgent=window.navigator.userAgent||"no `userAgent` provided by the browser",this.props={customStickyChangeNumber:e.customStickyChangeNumber||null,noStyles:e.noStyles||!1,stickyBitStickyOffset:e.stickyBitStickyOffset||0,parentClass:e.parentClass||"js-stickybit-parent",scrollEl:document.querySelector(e.scrollEl)||window,stickyClass:e.stickyClass||"js-is-sticky",stuckClass:e.stuckClass||"js-is-stuck",stickyChangeClass:e.stickyChangeClass||"js-is-sticky--change",useStickyClasses:e.useStickyClasses||!1,verticalPosition:e.verticalPosition||"top"};var i=this.props;i.positionVal=function(){for(var t=["","-o-","-webkit-","-moz-","-ms-"],s=document.head.style,e=0;e<t.length;e+=1)s.position=t[e]+"sticky";var i=s.position?s.position:"fixed";return s.position="",i}();var n=i.verticalPosition,o=i.noStyles,r=i.positionVal;this.els="string"==typeof t?document.querySelectorAll(t):t,"length"in this.els||(this.els=[this.els]),this.instances=[];for(var a=0;a<this.els.length;a+=1){var l=this.els[a],c=l.style;if(c[n]="top"!==n||o?"":i.stickyBitStickyOffset+"px",c.position="fixed"!==r?r:"","fixed"===r||i.useStickyClasses){var f=this.addInstance(l,i);this.instances.push(f)}}return this}return s.prototype.addInstance=function(t,s){var e=this,i={el:t,parent:t.parentNode,props:s};this.isWin=this.props.scrollEl===window;var n=this.isWin?window:function(t,s){var e=s,i=t;if(i.parentElement===e)return e;for(;i.parentElement!==e;)i=i.parentElement;return e}(i.el,i.props.scrollEl);return this.defineScrollOffsets(i),i.parent.className+=" "+s.parentClass,i.state="default",i.stateContainer=function(){return e.manageState(i)},n.addEventListener("scroll",i.stateContainer),i},s.prototype.defineScrollOffsets=function(t){var s=t,e=s.props,i=s.el,n=s.parent,o=!this.isWin&&"fixed"===e.positionVal,r="bottom"!==e.verticalPosition,a=o?e.scrollEl.getBoundingClientRect().top:0,l=function(t,s,e,i){return i?s.getBoundingClientRect().top-e:s.getBoundingClientRect().top}(0,n,a,o),c=null!==e.customStickyChangeNumber?e.customStickyChangeNumber:i.offsetHeight;return s.offset=a+e.stickyBitStickyOffset,s.stickyStart=r?l-s.offset:0,s.stickyChange=s.stickyStart+c,s.stickyStop=r?l+n.offsetHeight-(s.el.offsetHeight+s.offset):l+n.offsetHeight,s},s.prototype.manageState=function(s){var e=s,i=e.el,n=e.props,o=e.state,r=e.stickyStart,a=e.stickyChange,l=e.stickyStop,c=i.style,f=n.noStyles,p=n.positionVal,u=n.scrollEl,y=n.stickyClass,d=n.stickyChangeClass,h=n.stuckClass,k=n.verticalPosition,m=function(t){t()},g=this.isWin&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame)||m,C=t,v=this.isWin||u.getBoundingClientRect().top?window.scrollY||window.pageYOffset:u.scrollTop,S=v>r&&v<l&&("default"===o||"stuck"===o),w=v<=r&&"sticky"===o,b=v>=l&&"sticky"===o,x=v>=a&&v<=l,E=v<a||v>l;return g(function(){if(S){if(e.state="sticky",C(i,h,y),c.position=p,f)return;c.bottom="",c[k]=n.stickyBitStickyOffset+"px"}else if(w)e.state="default",C(i,y),"fixed"===p&&(c.position="");else if(b){if(e.state="stuck",C(i,y,h),"fixed"!==p||f)return;c.top="",c.bottom="0",c.position="absolute"}E?C(i,d):x&&C(i,"stub",d)}),e},s.prototype.removeInstance=function(s){var e=s.el,i=s.props,n=t;e.style.position="",e.style[i.verticalPosition]="",n(e,i.stickyClass),n(e,i.stuckClass),n(e.parentNode,i.parentClass)},s.prototype.cleanup=function(){for(var t=0;t<this.instances.length;t+=1){var s=this.instances[t];s.props.scrollEl.removeEventListener("scroll",s.stateContainer),this.removeInstance(s)}this.manageState=!1,this.instances=[]},function(t,e){return new s(t,e)}});
